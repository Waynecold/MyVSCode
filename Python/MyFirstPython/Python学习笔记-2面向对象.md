# Python 学习笔记2-面向对象

作者：Waynecold

## 1 - 初识对象

使用对象来组织数据的思路：

1. 设计类class
2. 创建对象
3. 对象属性赋值，`类名称.属性名称`

### 1.1 - 类的定义和使用

通过关键字`class`定义和创建，类的内部可以由两部分组成。包括类的属性，称为成员变量；类的行为，称为成员方法。（区别于一般写在类外面的称函数，类内部的称方法。）

> 定义语法：

```py
class 类名称:
    成员变量    # 属性

    def 成员方法(self, 参数列表):   # 行为
        成员方法体

对象 = 类名称()
```

关键字`self`是默认存在的方法形参，使得方法可以调用类内部的成员变量。

### 1.2 - 类和对象

现实世界中的事物有两种特性：`属性`和`行为`。使用程序中的类可以描述现实所有的事物。类是程序的“设计图纸”，对象是基于图纸生产的具体实体。面向对象编程，就是使用对象进行编程，设计类，再基于类创建对象，使用对象来完成具体的工作。

### 1.3 - 构造方法

构造类时使用`__init__()`方法，之后在使用类创建对象时，传入函数将自动传递给`__init__()`，并自动执行。

 注意：

1. init的前后是两条下划线
2. 构造方法也是成员方法，参数列表也有`self`参数
3. 在构造方法内调用或定义成员变量时，也需要使用`self`关键字

### 1.4 - 魔术方法

Python有很多内置类方法，称为：魔术方法。上面提到的`__init__`是其中一种。

|方法|功能|
|---|---|
|`__init__`|构造方法，用于创建类对象时初始化成员变量的属性|
|`__str__`|实现类对象转换成字符串的行为|
|`__lt__`|用于2个类对象进行小于（大于）的比较|
|`__le__`|用于2个类对象进行小于等于（大于等于）的比较|
|`__eq__`|用于2个类对象进行相等的比较|

比较符的魔法方法除了`self`都要多一个`other`传入参数

### 1.5 - 封装

面向对象简答理解是，基于模板（类）去创建实体（对象），使用对象来完成想要的功能。面向对象包括3大主要特性：`封装`、`继承`、`多态`。

将现实世界事物在类中描述为属性和方法，即是封装。

类中的部分成员变量和成员方法不一定都向用户公开，称为私有变量和私有成员。在变量名和方法名前加两个下划线即可转变为私有状态。类对象不能调用或使用私有变量和私有成员，只能给类内其他成员使用。

### 1.6 - 继承

构建新的类时，通常时在已有类的基础进行修改。子类构建的类对象，可以有自己的成员变量和成员方法，也可以使用父类的成员变量和成员方法。如果有重名的方法或属性，先继承的优先级更高。pass是占位语句，用来保证语法的完整性，没有具体意思。

> 语法：

```py
class 类名(父类名1, 父类名2, 父类名3...):
    类内容体
    (pass)          # 如没有新的内容，写个pass跳过
```

子类继承父类的成员属性和成员方法后，如果对其不满意，可以进行在子类中复写。

在子类中，如何调用父类成员：

1. `父类名.成员变量`，`父类名.成员方法(self)`
2. 使用`super().成员变量`，`super().成员方法()`

### 1.7 - 类型注解

一般IDE都有代码提示，但对于开发者创建的各种数据容器，IDE有时不能分辨出是什么类型，类型注解可帮助IDE做提示和可供阅读者作备注方便理解。类型注解和注释一样，只是提示性的，即使类型不对应在运行时也不会导致错误。

```py
# 基础容器类型注解
var_1: int = 10
var_2 str = "itheima"
my_list: list = [1, 2, 3]
my_tuple: tuple = (1, 2, 3)
my_dict: dict = {"itheima": 666}

# 类对象的类型注解
class Student:
    pass

stu: Student = Student()    # 提示stu是Student类的

# 详细注解
my_list: list[int] = [1, 2, 3]
my_tuple: tuple[int, str, bool] = (1, "hello", True)
my_dict: dict[str, int] = {"itheima": 666}

# 另一种写法，在注释中写注解
var_1 = random.randint(1, 10)   # type: int
var_2 = json.loads('{"name": "zhangsan"}')  # type: dict[str, str]

```

除了对数据容器进行类型注解，也可以对函数或方法，及传入参数和返回值进行注解。

```py
# 函数/方法的类型注解
def 函数方法名(形参名: 类型, 形参名: 类型...):
    pass

# 返回值的类型注解
def func(x: int, y: int) -> int:   # 返回值时int类型
    return x + y
```

### 1.8 - Union类型注解

Union类型注解即联合类型注解。当变量可以是多种类型之一时，可以使用Union类型进行注解。使用Union前，必须先导包。

```py
from typing import Union

my_list: list[Union[int, str]] = [1, 2, "itheima", "incast"]

def func(data: Union[int, str]) -> Union[int, str]:
    pass

```

### 1.9 - 多态/接口

多态，指完成某个行为（运行相同函数）时，使用不同对象会得到不同的状态。多态常作用于继承关系上。如，定义函数（方法），通过类型注解需要父类对象，但实际出入了子类对象进行工作，可以获得不同的工作状态。

父类向上抽象一个层次。父类的方法具体是没有实现的抽象方法(直接pass掉)。包含抽象方法的类，称为抽象类，也叫接口。这种结构多用于做顶层设计（设计标准），以便子类来做具体实现方法。也是对子类的一种软性约束。

### 1.10 - 综合案例
